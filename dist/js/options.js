!function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],p=0,m=[];p<i.length;p++)o=i[p],r[o]&&m.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);m.length;)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={2:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;s.push([395,0]),a()}({192:function(e,t,a){var n=a(193);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(97)(n,r);n.locals&&(e.exports=n.locals)},193:function(e,t,a){(e.exports=a(96)(!1)).push([e.i,'body {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\r\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\r\n    sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\ncode {\r\n  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\r\n    monospace;\r\n}\r\n',""])},197:function(e,t,a){var n=a(198);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(97)(n,r);n.locals&&(e.exports=n.locals)},198:function(e,t,a){(e.exports=a(96)(!1)).push([e.i,".App {\r\n  text-align: center;\r\n}\r\n\r\n.App-logo {\r\n  animation: App-logo-spin infinite 20s linear;\r\n  height: 5vmin;\r\n  margin: 15px 20px 0 20px;\r\n}\r\n\r\n.App-header {\r\n  min-height: 15vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center; \r\n  text-align: center;\r\n  font-size: calc(15px + 2vmin);\r\n  color: white;\r\n  margin: 20px 40px 10px 40px;\r\n}\r\n\r\n.App-link {\r\n  color: #61dafb;\r\n}\r\n\r\n@keyframes App-logo-spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.ant-upload-list-item {\r\n  border-left: 2px solid #999;\r\n  background: #ffe0b2;\r\n}\r\n\r\n.ant-layout-header {\r\n  background-color: rgb(40, 44, 52) !important;\r\n}\r\n\r\n.ant-card-head {\r\n  background-color: #ffb74d !important;\r\n}\r\n\r\n.instructionDiv {\r\n  min-height: 200px;\r\n}\r\n\r\n\r\n.search-wrapper {\r\n  padding: 10px;\r\n}\r\n\r\n.custmizeSearchBar {\r\n  width: 100%;\r\n}",""])},395:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(9),o=a.n(s),i=(a(192),a(195),a(197),a(408)),l=a(398),c=a(11);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Sider:p}=i.a;var m=class extends r.a.Component{constructor(...e){super(...e),d(this,"state",{collapsed:!0}),d(this,"onCollapse",e=>{this.setState({collapsed:e})})}render(){return r.a.createElement(p,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,style:{background:"#282c34"}},r.a.createElement(e=>r.a.createElement("div",{style:{height:"70px",marginLeft:e.collapsed?"0":"25%"}},r.a.createElement("img",{src:"images/sider-logo.png",className:"App-logo",alt:"logo"})),{collapsed:this.state.collapsed}),r.a.createElement(l.a,{theme:"dark",defaultSelectedKeys:["editor"],selectedKeys:[this.props.selectedKey],mode:"inline",style:{background:"#282c34"},onClick:this.props.changePage},r.a.createElement(l.a.Item,{key:"editor"},r.a.createElement(c.a,{type:"pie-chart"}),r.a.createElement("span",null,"JSON Editor")),r.a.createElement(l.a.Item,{key:"jsonList"},r.a.createElement(c.a,{type:"database"}),r.a.createElement("span",null,"Saved Files")),r.a.createElement(l.a.Item,{key:"tools"},r.a.createElement(c.a,{type:"tool"}),r.a.createElement("span",null,"Recorder Tools")),r.a.createElement(l.a.Item,{key:"setting"},r.a.createElement(c.a,{type:"file"}),r.a.createElement("span",null,"Setting"))))}};const{Footer:h}=i.a;var u=class extends r.a.Component{render(){return r.a.createElement(h,{style:{textAlign:"center"}}," Â© 2018 Agreement Express Inc.")}},g=a(56),f=a.n(g),y=a(381),b=a(382),E=a(62);const{Header:v}=i.a;var S=class extends r.a.Component{render(){return r.a.createElement(v,{className:"App-header"},r.a.createElement("span",null,this.props.title))}},x=a(403);class I{}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(I,"readFile",e=>new Promise(t=>{const a=new FileReader;a.onload=(e=>{t(JSON.parse(e.target.result))}),a.readAsText(e)}));const O=x.a.Dragger;var C=class extends r.a.Component{constructor(...e){super(...e),k(this,"state",{fileList:[]}),k(this,"handleUpload",e=>{const t=e[0].name;I.readFile(e[0]).then(e=>{this.props.setUploadedJson(e,t)})})}render(){const e={accept:".json",onRemove:e=>{this.setState(({fileList:t})=>{const a=t.indexOf(e),n=t.slice();return n.splice(a,1),{fileList:n}}),this.props.setUploadedJson({})},beforeUpload:e=>(this.setState({fileList:[e]}),this.handleUpload([e]),!1),fileList:this.state.fileList},t={accept:".json",beforeUpload:e=>(this.handleUpload([e]),!1),showUploadList:!1},a=this.props.dragger?e:t,n=this.props.dragger?r.a.createElement(O,w({},a,{style:{background:"#ffb74d"}}),r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(c.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Please use JSON file from AEX Reccorder")):r.a.createElement(x.a,a,r.a.createElement(E.a,{type:"primary",size:"large"},r.a.createElement(c.a,{type:"upload"})," Add New File"));return r.a.createElement("div",null,n)}},P=a(396),N=a(80),M=a(402),j=a(397),D=a(399),F=a(401);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){T(e,t,a[t])})}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const J=M.a.Item,U=r.a.createContext(),_=M.a.create()(e=>{let{form:t,index:a}=e,n=R(e,["form","index"]);return r.a.createElement(U.Provider,{value:t},r.a.createElement("tr",n))});class V extends r.a.Component{constructor(...e){super(...e),T(this,"state",{editing:!1}),T(this,"toggleEdit",()=>{const e=!this.state.editing;this.setState({editing:e},()=>{e&&this.input.focus()})}),T(this,"handleClickOutside",e=>{const{editing:t}=this.state;t&&this.cell!==e.target&&!this.cell.contains(e.target)&&this.save()}),T(this,"save",()=>{const{record:e,handleSave:t}=this.props;this.form.validateFields((a,n)=>{a||(this.toggleEdit(),t(L({},e,n)))})})}componentDidMount(){this.props.editable&&document.addEventListener("click",this.handleClickOutside,!0)}componentWillUnmount(){this.props.editable&&document.removeEventListener("click",this.handleClickOutside,!0)}render(){const{editing:e}=this.state,t=this.props,{editable:a,dataIndex:n,title:s,record:o,index:i,handleSave:l}=t,c=R(t,["editable","dataIndex","title","record","index","handleSave"]);return r.a.createElement("td",A({ref:e=>this.cell=e},c),a?r.a.createElement(U.Consumer,null,t=>(this.form=t,e?r.a.createElement(J,{style:{margin:0}},t.getFieldDecorator(n,{rules:[{required:!0,message:`${s} is required.`}],initialValue:o[n]})(r.a.createElement(j.a,{ref:e=>this.input=e,onPressEnter:this.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:this.toggleEdit},c.children))):c.children)}}class H extends r.a.Component{constructor(e){super(e),T(this,"handleDelete",e=>{const t=[...this.props.dataSource],a={mode:this.props.mode,dataSource:t.filter(t=>t.key!==e),pageIndex:this.props.pageIndex};this.props.updateRevisedJson(a)}),T(this,"handleAdd",()=>{const e=[...this.props.dataSource],t={mode:this.props.mode,dataSource:[{name:"default",id:"default",type:"text",options:"default",tagName:"INPUT",isRequired:!1},...e],pageIndex:this.props.pageIndex};this.props.updateRevisedJson(t)}),T(this,"handleSave",e=>{const t=[...this.props.dataSource],a=t.findIndex(t=>e.key===t.key),n=t[a];t.splice(a,1,L({},n,e));const r={mode:this.props.mode,dataSource:t,pageIndex:this.props.pageIndex};this.props.updateRevisedJson(r)}),this.columns=[{title:"FieldName",dataIndex:"name",filters:[{text:"business",value:"business"},{text:"company",value:"company"},{text:"owner",value:"owner"}],onFilter:(e,t)=>0===t.name.toLowerCase().indexOf(e),sorter:(e,t)=>e.name.length-t.name.length,editable:!0},{title:"Field id",dataIndex:"id",sorter:(e,t)=>e.id.length-t.id.length,editable:!0},{title:"Value",dataIndex:"options",editable:!0},{title:"Delete",dataIndex:"operation",render:(e,t)=>this.props.dataSource.length>=1?r.a.createElement(D.a,{title:"Sure to delete?",onConfirm:()=>this.handleDelete(t.key)},r.a.createElement("a",null,"Delete")):null}]}render(){const e={body:{row:_,cell:V}},t=this.columns.map(e=>e.editable?L({},e,{onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:this.handleSave})}):e);return r.a.createElement("div",null,r.a.createElement(E.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16}},"Add a new entry"),r.a.createElement(F.a,{components:e,rowClassName:()=>"editable-row",bordered:!0,dataSource:this.props.dataSource,columns:t,rowKey:"key"}))}}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const W=P.a.TabPane;var B=class extends r.a.Component{constructor(...e){super(...e),G(this,"generateTable",(e,t,a)=>{const n={maxWidth:180,overflow:"hidden",textOverflow:"ellipsis",textAlign:"left"},s=r.a.createElement("div",null,e.docName),o=e.docName.length>25?r.a.createElement(N.a,{placement:"left",title:s},r.a.createElement("div",{style:n},e.docName)):r.a.createElement("div",{style:n},e.docName);return r.a.createElement(W,{tab:o,key:t},r.a.createElement(H,{dataSource:this.parseData(e.entries),mode:a,pageIndex:t,updateRevisedJson:this.updateRevisedJson}))}),G(this,"parseData",e=>(e.forEach((e,t)=>{e.key=t}),e)),G(this,"updateRevisedJson",e=>{this.setState(()=>{const t=e.pageIndex;let a=this.props.json;return"publisher"===e.mode?a.pages[t].entries=e.dataSource:a.pages_recipient[t].entries=e.dataSource,this.props.updateRevisedJson(a),{uploadedJson:a}})})}render(){const e=this.props.json.pages?this.props.json.pages.map((e,t)=>this.generateTable(e,t,"publisher")):r.a.createElement(W,{tab:"Tab 1",key:"1"},"No Data"),t=this.props.json.pages_recipient?this.props.json.pages_recipient.map((e,t)=>this.generateTable(e,t,"recipient")):r.a.createElement(W,{tab:"Tab 1",key:"1"},"No Data");return r.a.createElement(P.a,{defaultActiveKey:"1"},r.a.createElement(W,{tab:r.a.createElement("span",null,r.a.createElement(c.a,{type:"smile"}),"Publisher Mode"),key:"1"},r.a.createElement(P.a,{defaultActiveKey:"0",tabPosition:"left"},e)),r.a.createElement(W,{tab:r.a.createElement("span",null,r.a.createElement(c.a,{type:"user"}),"Recipient Mode"),key:"2"},r.a.createElement(P.a,{defaultActiveKey:"0",tabPosition:"left"},t)))}},q=a(407);const X=q.a.Step;var $=class extends r.a.Component{render(){return r.a.createElement("div",null,r.a.createElement(y.a,{style:{paddingTop:"50px"}},r.a.createElement(b.a,{span:4}),r.a.createElement(b.a,{span:16,align:"middle"},r.a.createElement(q.a,null,r.a.createElement(X,{status:"finish",title:"Upload",icon:r.a.createElement(c.a,{type:"upload"}),description:"Upload your Json file"}),r.a.createElement(X,{status:"finish",title:"View",icon:r.a.createElement(c.a,{type:"solution"}),description:"View data for each document"}),r.a.createElement(X,{status:"finish",title:"Edit",icon:r.a.createElement(c.a,{type:"edit"}),description:"Edit, add, remove data entries"}),r.a.createElement(X,{status:"finish",title:"Download",icon:r.a.createElement(c.a,{type:"download"}),description:"Download your Json file"}))),r.a.createElement(b.a,{span:4})))}},K=a(410),z=a(406);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Q(e,t,a[t])})}return e}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ee=M.a.Item,te=M.a.create({onFieldsChange(e,t){e.onChange(t)},mapPropsToFields:e=>({companyName:M.a.createFormField(Z({},e.companyName,{value:e.companyName.value})),companyId:M.a.createFormField(Z({},e.companyId,{value:e.companyId.value})),transactionName:M.a.createFormField(Z({},e.transactionName,{value:e.transactionName.value})),transRefId:M.a.createFormField(Z({},e.transRefId,{value:e.transRefId.value})),transactionFolderName:M.a.createFormField(Z({},e.transactionFolderName,{value:e.transactionFolderName.value})),transactionFolderId:M.a.createFormField(Z({},e.transactionFolderId,{value:e.transactionFolderId.value}))}),onValuesChange(e,t){}})(e=>{const{getFieldDecorator:t}=e.form;return r.a.createElement(M.a,{layout:"vertical",hideRequiredMark:!0},r.a.createElement(ee,{label:"Company Name"},t("companyName",{rules:[{required:!0,message:"Please input company name!"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,{label:"Company Id"},t("companyId",{rules:[{required:!0,message:"Please input company id!"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,{label:"Transaction Name"},t("transactionName",{rules:[{required:!0,message:"Please input transaction name!"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,{label:"TransRefId"},t("transRefId",{rules:[{required:!0,message:"Please input transRefId!"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,{label:"Transaction Folder Name"},t("transactionFolderName",{rules:[{required:!0,message:"Please input transaction folder name"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,{label:"Transaction Folder Id"},t("transactionFolderId",{rules:[{required:!0,message:"Please input transaction folder id"}]})(r.a.createElement(j.a,null))),r.a.createElement(ee,null,r.a.createElement(E.a,{type:"primary",onClick:()=>{e.form.validateFields(t=>{t||e.handleSave()})},block:!0},"Update")))});var ae=class extends r.a.Component{constructor(e){super(e),Q(this,"editMetaInfo",()=>{this.props.id&&this.setState({editMetaInfo:this.parseMetaInfo(this.props.meta)}),this.setState({editDialogVisible:!0})}),Q(this,"closeEditDialog",()=>{this.setState({editDialogVisible:!1}),this.props.onEditMetaInfoClose&&this.props.onEditMetaInfoClose()}),Q(this,"handleEditFormChange",e=>{this.props.updateEditMetaInfo?this.props.updateEditMetaInfo(e):this.setState(({editMetaInfo:t})=>({editMetaInfo:Z({},t,e)}))}),Q(this,"handleSave",()=>{if(this.props.id){let e=Object.assign({},this.props.meta);e.companyName=this.state.editMetaInfo.companyName.value,e.companyId=this.state.editMetaInfo.companyId.value,e.transactionName=this.state.editMetaInfo.transactionName.value,e.transRefId=this.state.editMetaInfo.transRefId.value,e.transactionFolderName=this.state.editMetaInfo.transactionFolderName.value,e.transactionFolderId=this.state.editMetaInfo.transactionFolderId.value,this.props.updateMetaInfo(e,this.props.id)}else this.props.updateMetaInfo();this.setState({editDialogVisible:!1})}),Q(this,"parseMetaInfo",e=>({companyName:{value:e?e.companyName:""},companyId:{value:e?e.companyId:""},transactionName:{value:e?e.transactionName:""},transRefId:{value:e?e.transRefId:""},transactionFolderName:{value:e?e.transactionFolderName:""},transactionFolderId:{value:e?e.transactionFolderId:""}})),this.state={editDialogVisible:!1,editMetaInfo:this.props.editMetaInfo?this.props.editMetaInfo:this.parseMetaInfo(this.props.meta)}}render(){const e=this.props.visible?this.props.margin?{marginTop:"50px",display:"block"}:{display:"block"}:{display:"none"},t=this.props.editMetaInfo?this.props.editMetaInfo:this.state.editMetaInfo,a=this.props.meta;return r.a.createElement(K.a,{title:a.companyName?a.companyName:"Unknown Company",style:e,hoverable:!0,extra:r.a.createElement("a",{onClick:this.editMetaInfo},"Edit")},r.a.createElement("p",null,r.a.createElement("strong",null,"Transaction Name:")," ",a.transactionName?a.transactionName:""),r.a.createElement("p",null,r.a.createElement("strong",null,"TransRefId: ")," ",a.transRefId?a.transRefId:""),r.a.createElement("p",null,r.a.createElement("strong",null,"Number of Pages: "),this.props.numOfPages," "),r.a.createElement("p",null,r.a.createElement("strong",null,"Recorder version:")," ",a.recorderVersion?a.recorderVersion:"Old version"),r.a.createElement(z.a,{title:"Edit Meta Info",visible:this.state.editDialogVisible,onCancel:this.closeEditDialog,footer:null,centered:!0},r.a.createElement(te,Y({},t,{onChange:this.handleEditFormChange,handleSave:this.handleSave}))))}};function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Content:re}=i.a;var se=class extends r.a.Component{constructor(e){super(e),ne(this,"setUploadedJson",(e,t)=>{e.meta?this.setState({uploadedJson:e,editMetaInfo:this.parseMetaInfo(e.meta),displayPages:!0,fileName:t}):this.setState({uploadedJson:{},editMetaInfo:{},displayPages:!1,downloadBtnDisable:!0,fileName:""})}),ne(this,"updateRevisedJson",e=>{e.meta&&this.setState({uploadedJson:e,downloadBtnDisable:!1})}),ne(this,"downloadRevisedJson",()=>{console.log("downloading");const e=JSON.stringify(this.state.uploadedJson,null,2),t=new Blob([e],{type:"application/json"});f()(t,this.state.fileName.split(".")[0]+"-REVISED.json")}),ne(this,"updateEditMetaInfo",e=>{this.setState(({editMetaInfo:t})=>({editMetaInfo:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){ne(e,t,a[t])})}return e}({},t,e)}))}),ne(this,"updateMetaInfo",()=>{let e=Object.assign({},this.state.uploadedJson);e.meta.companyName=this.state.editMetaInfo.companyName.value,e.meta.companyId=this.state.editMetaInfo.companyId.value,e.meta.transactionName=this.state.editMetaInfo.transactionName.value,e.meta.transRefId=this.state.editMetaInfo.transRefId.value,e.meta.transactionFolderName=this.state.editMetaInfo.transactionFolderName.value,e.meta.transactionFolderId=this.state.editMetaInfo.transactionFolderId.value,this.setState({uploadedJson:e,downloadBtnDisable:!1})}),ne(this,"parseMetaInfo",e=>({companyName:{value:e?e.companyName:""},companyId:{value:e?e.companyId:""},transactionName:{value:e?e.transactionName:""},transRefId:{value:e?e.transRefId:""},transactionFolderName:{value:e?e.transactionFolderName:""},transactionFolderId:{value:e?e.transactionFolderId:""}})),ne(this,"onEditMetaInfoClose",()=>{const e=!!this.state.uploadedJson.meta&&this.state.uploadedJson.meta;this.setState({editMetaInfo:this.parseMetaInfo(e)})}),this.state={uploadedJson:{},displayPages:!1,downloadBtnDisable:!0,fileName:"",editMetaInfo:this.parseMetaInfo()}}render(){const e=this.state.uploadedJson,t=e.meta?e.meta:{},a=void 0!==e.meta,n=e.meta?(e.pages?e.pages.length:0)+(e.pages_recipient?e.pages_recipient.length:0):0,s=this.state.displayPages?r.a.createElement(B,{json:this.state.uploadedJson,updateRevisedJson:this.updateRevisedJson}):r.a.createElement($,null);return r.a.createElement(i.a,null,r.a.createElement(S,{title:"AEX Recorder JSON Editor"}),r.a.createElement(re,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24}},r.a.createElement(y.a,{gutter:16},r.a.createElement(b.a,{lg:6,span:24},r.a.createElement("div",{style:{marginRight:"10px"}},r.a.createElement(C,{setUploadedJson:this.setUploadedJson,dragger:!0})),r.a.createElement("div",null,r.a.createElement(ae,{editMetaInfo:this.state.editMetaInfo,meta:t,numOfPages:n,visible:a,margin:!0,updateMetaInfo:this.updateMetaInfo,updateEditMetaInfo:this.updateEditMetaInfo,onEditMetaInfoClose:this.onEditMetaInfoClose})),r.a.createElement("div",{style:{margin:"50px 10px 50px 0px"}},r.a.createElement(E.a,{type:"primary",icon:"download",size:"large",onClick:this.downloadRevisedJson,disabled:this.state.downloadBtnDisable,block:!0},"Download"))),r.a.createElement(b.a,{lg:18,span:24},r.a.createElement("div",{style:{marginLeft:"10px",minHeight:"68vh",background:"#fafafa"}},s))))))}},oe=a(411);var ie=class extends r.a.Component{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"getItemList",e=>{const t=[];for(let a=0;a<e.length;a+=3){const n=e.slice(a,a+3);t.push(r.a.createElement(y.a,{key:a,gutter:16,style:{marginBottom:16}},n.map((e,t)=>r.a.createElement(b.a,{key:t,xs:24,sm:24,md:12,lg:8,xl:8},e))))}return t})}render(){return this.getItemList(this.props.itemList)}};function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ce{static getFromStorage(e,t){return t=t||ce.localStorage,new Promise(a=>{t.get(e,e=>{a(e)})})}static setToStorage(e,t){return t=t||ce.localStorage,new Promise(a=>{t.set(e,()=>{a(chrome.runtime.lastError)})})}static addJsonToDatabase(e){return ce.getFromStorage("database").then(({database:t})=>ce.setToStorage({database:[...t,...e]}))}static addJsonToDatabase_import(e){return ce.getFromStorage("database").then(({database:t})=>{const a=t.slice(0);return e.forEach(e=>{const n=t.findIndex(t=>t.Date==e.Date);n>-1?a[n]=e:a.push(e)}),ce.setToStorage({database:a})})}static setAexCredentials(e){return ce.getFromStorage("credentials").then(({credentials:t})=>ce.setToStorage({credentials:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){le(e,t,a[t])})}return e}({},t,e)}))}static clearAexCredentials(){return ce.setToStorage({credentials:{}})}}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pe(e){const t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" @ "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}le(ce,"sendMessage",(e,t)=>{chrome.runtime.sendMessage({message:e,obj:t})}),le(ce,"localStorage",chrome.storage.local),le(ce,"syncStorage",chrome.storage.sync),le(ce,"managedStorage",chrome.storage.managed);var me=class extends r.a.Component{constructor(e){super(e),de(this,"openImportModal",e=>(I.readFile(e).then(e=>{this.setState({modalVisible:!0,importJson:e})}),!1)),de(this,"handleImport",()=>(this.setState({confirmLoading:!0}),ce.addJsonToDatabase_import(this.state.importJson).then(e=>{e?oe.a.error({message:"Error",description:"Failed to import recored jsons."}):oe.a.success({message:"Succeed",description:"Successfully imported Recored jsons."})}).catch(e=>{oe.a.warn("Failed to import recored jsons.")}),this.setState({modalVisible:!1,confirmLoading:!1,importFile:null}),!1)),de(this,"handleExport",()=>{ce.getFromStorage("database").then(({database:e})=>{const t=new Blob([JSON.stringify(e)],{type:"application/json"});Object(g.saveAs)(t,`Recorder-Export-${pe((new Date).getTime())}.export`)})}),this.state={modalVisible:!1,confirmLoading:!1,importJson:null}}render(){return r.a.createElement("div",null,r.a.createElement(z.a,{title:"Import recored jsons",closable:!1,maskClosable:!1,confirmLoading:this.state.confirmLoading,visible:this.state.modalVisible,onOk:this.handleImport,onCancel:()=>this.setState({modalVisible:!1,importFile:null})},r.a.createElement("p",null,"You are about to import the following jsons"),r.a.createElement(F.a,{pagination:{pageSize:5},columns:[{title:"Name",key:"fileName",dataIndex:"fileName"},{title:"Date",key:"Date",dataIndex:"Date",render:pe}],dataSource:this.state.importJson})),r.a.createElement(K.a,{title:"Back-up Tool",actions:[r.a.createElement(x.a,{name:"file",accept:".export",showUploadList:!1,beforeUpload:this.openImportModal},r.a.createElement(c.a,{type:"upload"})," Import All"),r.a.createElement(D.a,{title:"You are about to export all the recorded jsons stored in the extension.",onConfirm:this.handleExport},r.a.createElement(c.a,{type:"export"})," Export All")],bodyStyle:{minHeight:90}},"Easily backup and restore all your recorded json!"))}};function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ue{static generatreFormData(e){const t=new FormData;for(let a in e)t.append(a,e[a]);return t}constructor(e){this.server=e,this.secToken=null}getCrendentials(){return ce.getFromStorage("credentials").then(({credentials:e})=>e&&e[this.server]||{})}getServerUrl(){return ue.AexServerUrl[this.server]}async login(){const{username:e,password:t}=await this.getCrendentials();return e&&t?this.callServer({url:"/api/InboxUI/v3/login",option:{method:"POST",body:new URLSearchParams(ue.generatreFormData({AEX_USER_NAME:e,AEX_USER_PASSWORD:t,AEX_USER_LOGIN:!1}))},headers:{"Content-Type":"application/x-www-form-urlencoded"},useSecToken:!1}).then(e=>e.json()).then(({errorCode:e,res:t})=>(console.log(e),1!=e?Promise.reject("Invalid Credential!"):(this.secToken=t,t))):Promise.reject("No credentials is provided.")}async getToken(){return this.secToken?this.secToken:this.login()}async callServer({url:e,option:t,useSecToken:a}){return a&&(t.headers=t.headers||{},t.headers.AEX_SEC_TOKEN=await this.getToken()),fetch(`${this.getServerUrl()}${e}`,t)}}he(ue,"AexServer",{LOCAL:"LOCAL",DEVSTAGE:"DEVSTAGE",STAGING:"STAGING",UAT:"UAT",USPROD:"USPROD",CAPROD:"CAPROD"}),he(ue,"AexServerUrl",{LOCAL:"http://localhost:8080",DEVSTAGE:"https://usdevstage.agreementexpress.net",STAGING:"https://staging.agreementexpress.net",UAT:"https://uat.agreementexpress.net",USPROD:"https://us.agreementexpress.net",CAPROD:"https://agreementexpress.net"});const ge={};for(let e in ue.AexServer){const t=ue.AexServer[e];ge[t]=new ue(t)}var fe=a(378),ye=a(81),be=a(94),Ee=a.n(be);function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Se=(e,{key:t})=>e.toLowerCase().split("").every(e=>t.toLowerCase().includes(e));var xe=M.a.create()(class extends r.a.Component{constructor(e){super(e),ve(this,"onServerChange",e=>{this.setState({server:e,companyList:[],folderList:[],templateList:[],loading:!0}),this.props.form.setFieldsValue({companyId:null,folderId:null}),ge[e].callServer({url:"/api/UserServices/v2/getUserInformation",option:{method:"POST"},useSecToken:!0}).then(e=>e.json()).then(e=>{const t=e.res.companyList;this.setState({companyList:t})}).catch(e=>{oe.a.error({message:"Error",description:e})}).then(()=>{this.setState({loading:!1})})}),ve(this,"onCompanyChange",e=>{this.setState({folderList:[],templateList:[],loading:!0}),this.props.form.setFieldsValue({folderId:null}),ge[this.state.server].callServer({url:`/api/TemplateServices/v2/getRootFolder?AEX_COMPANY_ID=${e}`,option:{method:"GET"},useSecToken:!0}).then(e=>e.json()).then(e=>{const t=e.res.children;this.setState({folderList:t})}).catch(e=>{oe.a.error({message:"Error",description:e})}).then(()=>{this.setState({loading:!1})})}),ve(this,"onFolderChange",e=>{const t=this.state.folderList.find(({id:t})=>t==e).templateItems;this.setState({templateList:t,loading:!0});const a=t.map(e=>e.guid).join(",");ge[this.state.server].callServer({url:`/api/TemplateServices/v3/getTemplateSignaturesByGuids?guids=${a}`,option:{method:"GET"},useSecToken:!0}).then(e=>e.json()).then(e=>{const t=Object.keys(e.res).map(t=>({label:e.res[t].user,user:""}));this.setState({signaturePlaceholders:t})}).catch(e=>{oe.a.error({message:"Error",description:e})}).then(()=>{this.setState({loading:!1})})}),ve(this,"submit",()=>{this.props.form.validateFields((e,t)=>{if(e)return;this.state.folderList.find(({id:e})=>e==t.folderId).transactionRefId;this.props.onFormSubmit(t,this.state)})}),this.state={companyList:[],folderList:[],templateList:[],signaturePlaceholders:[],loading:!1,server:null,URL:""}}render(){const{getFieldDecorator:e}=this.props.form;return r.a.createElement(fe.a,{tip:"fetching data from server...",spinning:this.state.loading},r.a.createElement(M.a,{layout:"vertical"},r.a.createElement(Ee.a,{label:"Server"},e("server",{rules:[{required:!0,message:"Please choose a server!"}]})(r.a.createElement(ye.a,{onSelect:this.onServerChange},r.a.createElement(ye.a.Option,{value:"LOCAL"},"Localhost"),r.a.createElement(ye.a.Option,{value:"DEVSTAGE"},"US Dev Stage"),r.a.createElement(ye.a.Option,{value:"STAGING"},"Staging"),r.a.createElement(ye.a.Option,{value:"UAT"},"UAT"),r.a.createElement(ye.a.Option,{value:"USPROD"},"US Production"),r.a.createElement(ye.a.Option,{value:"CAPROD"},"CA Production")))),r.a.createElement(Ee.a,{label:"Company"},e("companyId",{rules:[{required:!0,message:"Please choose a company!"}]})(r.a.createElement(ye.a,{onSelect:this.onCompanyChange,showSearch:!0,filterOption:Se},this.state.companyList.map(e=>r.a.createElement(ye.a.Option,{key:e.companyName,value:e.companyId},e.companyName))))),r.a.createElement(Ee.a,{label:"Folder"},e("folderId",{rules:[{required:!0,message:"Please choose a folder!"}]})(r.a.createElement(ye.a,{onSelect:this.onFolderChange,showSearch:!0,filterOption:Se},this.state.folderList.map(e=>r.a.createElement(ye.a.Option,{key:e.folderName,value:e.id},e.folderName)))))),"The Folder contains the following templates:",r.a.createElement(F.a,{pagination:{pageSize:5},rowKey:"guid",columns:[{title:"Template Name",key:"name",dataIndex:"name"},{title:"File Name",key:"fileName",dataIndex:"fileName"}],dataSource:this.state.templateList}),r.a.createElement(E.a,{type:"primary",onClick:this.submit},this.props.submitBtnText))}});var Ie=class extends r.a.Component{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"generateURL",(e,t)=>{const{server:a,folderId:n,companyId:r}=e,s=t.folderList.find(e=>e.id===n).transactionRefId,o=t.signaturePlaceholders.map(e=>`${e.label}:${e.label}`).join(","),i=`${ue.AexServerUrl[a]}/api/TemplateServices/v2/publishTransaction?agexp_transrefid=${s}&agexp_transfolderid=${n}&agexp_transcompany=${r}&allRecipients=${o}&aex_direct=true`;navigator.clipboard.writeText(i).then(()=>{oe.a.success({message:"the self-serve URL is copied to the clipboard!"})})}),this.state={modalVisible:!1}}render(){return r.a.createElement("div",null,r.a.createElement(z.a,{title:"Self-Serve URL Generator",maskClosable:!1,visible:this.state.modalVisible,onCancel:()=>this.setState({modalVisible:!1}),footer:[r.a.createElement(E.a,{key:"close",onClick:()=>this.setState({modalVisible:!1})},"Close")]},r.a.createElement(xe,{onFormSubmit:this.generateURL,submitBtnText:"Generate!"})),r.a.createElement(K.a,{title:"Self Serve URL Generator",actions:[r.a.createElement("div",{onClick:()=>this.setState({modalVisible:!0})},r.a.createElement(c.a,{type:"tool"})," Open")],bodyStyle:{minHeight:90}},"Easily genrate URLs for launching transaction!!"))}};const{Content:we}=i.a;class ke extends r.a.Component{constructor(e){super(e),oe.a.config({placement:"bottomLeft",bottom:20,duration:1})}render(){return r.a.createElement(i.a,null,r.a.createElement(S,{title:"AEX Recorder JSON Tools"}," "),r.a.createElement(we,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24,minHeight:800}},r.a.createElement("div",{style:{marginRight:"10px",minHeight:750,maxWidth:"75%",margin:"0 auto"}},r.a.createElement(ie,{itemList:ke.toolList})))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ke,"toolList",[r.a.createElement(me,null),r.a.createElement(Ie,null)]);var Oe=ke,Ce=a(400),Pe=a(409),Ne=a(412);var Me=class extends r.a.Component{render(){return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement(Ne.a,{className:"custmizeSearchBar",size:"large",dataSource:this.props.dataSource,filterOption:(e,t)=>-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase()),placeholder:"Search here",onSelect:this.props.onSelect,onSearch:this.props.onSearch,allowClear:!0}))}};function je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Content:De}=i.a;function Fe(e){const t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" @ "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var Ae=class extends r.a.Component{constructor(e){super(e),je(this,"componentWillUnmount",()=>{chrome.storage.onChanged.removeListener(this.loadDatabase)}),je(this,"loadDatabase",()=>{ce.getFromStorage("database").then(({database:e})=>{var t=e||[];this.setState({jsonArray:t,displayArray:t})})}),je(this,"onEditDrawerClose",()=>{this.setState({editMode:!1,selectedJson:{},selectedJsonId:""})}),je(this,"generateItemList",()=>{const e=[{title:"Name",key:"name",dataIndex:"fileName",editable:!0},{title:"Date Created",key:"date",dataIndex:"Date",render:Fe},{title:"Action",key:"action",render:(e,t)=>r.a.createElement("span",null,r.a.createElement(Ce.a,{type:"vertical"}),r.a.createElement("a",{onClick:()=>this.handleDownload(t.fileName,t.seleniumJson)},"Download "),r.a.createElement(Ce.a,{type:"vertical"}),r.a.createElement("a",{onClick:()=>this.handleEdit(t.Date,t.seleniumJson)},"Edit"),r.a.createElement(Ce.a,{type:"vertical"}),r.a.createElement(D.a,{title:"Sure to delete?",onConfirm:()=>this.handleDelete(t.Date)},r.a.createElement("a",null,"Delete")),r.a.createElement(Ce.a,{type:"vertical"}))}].map(e=>e.editable?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){je(e,t,a[t])})}return e}({},e,{onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:this.handleCellSave})}):e),t={body:{row:_,cell:V}};return r.a.createElement(F.a,{components:t,rowClassName:()=>"editable-row",columns:e,expandedRowRender:e=>{const t=e.seleniumJson,a=t.meta?(t.pages?t.pages.length:0)+(t.pages_recipient?t.pages_recipient.length:0):0,n=null!=t.meta;return r.a.createElement(ae,{meta:t.meta||{},numOfPages:a,visible:n,margin:!1,updateMetaInfo:this.updateMetaInfo,id:e.Date})},dataSource:this.state.displayArray,rowKey:"Date"})}),je(this,"updateMetaInfo",(e,t)=>{const a=[...this.state.jsonArray];a.forEach((n,r)=>{n.Date==t&&(a[r].seleniumJson.meta=e)}),this.updateToLocalStorage(a,"Meta info saved succesfully")}),je(this,"handleCellSave",e=>{const t=[...this.state.jsonArray];t.forEach((a,n)=>{a.Date==e.Date&&(t[n]=e)}),this.updateToLocalStorage(t,"File name saved succesfully")}),je(this,"updateRevisedJson",e=>{let t=this.state.jsonArray;t.forEach(t=>{t.Date===this.state.selectedJsonId&&(t.seleniumJson=e)}),this.updateToLocalStorage(t,"Changes saved")}),je(this,"handleDelete",e=>{const t=this.state.jsonArray.filter(t=>t.Date!==e);this.updateToLocalStorage(t,"Delete successfully")}),je(this,"handleEdit",(e,t)=>{this.setState({selectedJson:t,selectedJsonId:e,editMode:!0})}),je(this,"handleDownload",(e,t)=>{const a=JSON.stringify(t,null,2),n=new Blob([a],{type:"application/json"});f()(n,e+".json")}),je(this,"updateToLocalStorage",(e,t)=>{ce.setToStorage({database:e}).then(e=>{if(t){const a=e||t,n=e?"error":"success";oe.a[n]({message:a})}})}),je(this,"handleSearch",e=>{this.setState({displayArray:e?this.state.jsonArray.filter(t=>-1!==t.fileName.toUpperCase().indexOf(e.toUpperCase())):this.state.jsonArray})}),je(this,"handleFileUpload",(e,t)=>{const a=[{Date:(new Date).getTime(),fileName:t.split(".")[0],seleniumJson:e},...this.state.jsonArray];this.updateToLocalStorage(a,"New file added successfully")}),this.state={jsonArray:[],displayArray:[],selectedJson:{},selectedJsonId:"",editMode:!1},this.loadDatabase(),oe.a.config({placement:"bottomLeft",bottom:20,duration:1}),chrome.storage.onChanged.addListener(this.loadDatabase)}render(){let e=[];return this.state.jsonArray.forEach(t=>{t.fileName&&e.push(t.fileName)}),r.a.createElement(i.a,null,r.a.createElement(S,{title:"AEX Recorder Saved JSON Files"}," "),r.a.createElement(De,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24}},r.a.createElement("div",{style:{background:"#fafafa"}},r.a.createElement(y.a,{gutter:16},r.a.createElement(b.a,{span:12},r.a.createElement(Me,{dataSource:e,onSelect:this.handleSearch,onSearch:this.handleSearch})),r.a.createElement(b.a,{span:12,style:{padding:10}},r.a.createElement(C,{setUploadedJson:this.handleFileUpload})))),r.a.createElement(y.a,{gutter:16},r.a.createElement(b.a,{span:24},r.a.createElement("div",{style:{minHeight:"68vh",background:"#fafafa"}},this.generateItemList())))),r.a.createElement("div",null,r.a.createElement(Pe.a,{title:"Edit File",placement:"right",closable:!1,onClose:this.onEditDrawerClose,visible:this.state.editMode,width:"85em"},r.a.createElement(B,{json:this.state.selectedJson,updateRevisedJson:this.updateRevisedJson}),r.a.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},r.a.createElement(E.a,{style:{marginRight:8},onClick:this.onEditDrawerClose},"Close"))))))}},Le=a(405),Te=a(404);const Re=M.a.Item;const Je=M.a.create()(class extends r.a.Component{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleSubmit",e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{if(!e){const{server:e,username:a,password:n}=t;ce.setAexCredentials({[e]:{username:a,password:n}}).then(()=>{oe.a.success({message:"Success",description:"credentials stored to local storage"})})}})})}render(){const{getFieldDecorator:e,getFieldsError:t}=this.props.form;return r.a.createElement(M.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(Re,{label:"Server"},e("server",{rules:[{required:!0,message:"Please choose a server!"}]})(r.a.createElement(ye.a,{style:{width:200}},r.a.createElement(ye.a.Option,{value:"LOCAL"},"Localhost"),r.a.createElement(ye.a.Option,{value:"DEVSTAGE"},"US Dev Stage"),r.a.createElement(ye.a.Option,{value:"STAGING"},"Staging"),r.a.createElement(ye.a.Option,{value:"UAT"},"UAT"),r.a.createElement(ye.a.Option,{value:"USPROD"},"US Production"),r.a.createElement(ye.a.Option,{value:"CAPROD"},"CA Production")))),r.a.createElement(Re,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(c.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(Re,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(c.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(Re,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",disabled:function(e){return Object.keys(e).some(t=>e[t])}(t())},"Save"),r.a.createElement(E.a,{type:"danger",onClick:()=>ce.clearAexCredentials().then(()=>oe.a.success({message:"Success",description:"Credentials Cleared"}))},"Clear All")))}});function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Content:_e}=i.a;var Ve=class extends r.a.Component{constructor(e){super(e),Ue(this,"createMap",()=>{let e=new Map;return e.set(0,2e3),e.set(25,1500),e.set(50,1e3),e.set(75,650),e.set(100,300),e.set(300,100),e.set(650,75),e.set(1e3,50),e.set(1500,20),e.set(2e3,0),e}),Ue(this,"loadSettings",()=>{ce.getFromStorage("settings").then(({settings:e})=>{var t=e||[];this.setState({demoModeSpeed:this.state.valueMap.get(t.demoModeInterval)}),console.log(e)})}),Ue(this,"updateDemoModeSliderValue",e=>{this.setState({demoModeSpeed:e})}),Ue(this,"saveSetting",()=>{const e={demoModeInterval:this.state.valueMap.get(this.state.demoModeSpeed)};ce.sendMessage("options_page_settings_changed",e),ce.setToStorage({settings:e}).then(e=>{const t=e||"Settings saved successfully!",a=e?"error":"success";oe.a[a]({message:t})})}),this.state={demoModeSpeed:50,valueMap:this.createMap()},this.loadSettings(),oe.a.config({placement:"bottomLeft",bottom:20,duration:1})}render(){const e=Le.a.Panel,t={background:"#ffb74d",borderRadius:4,marginBottom:24,border:0,overflow:"hidden"},a={0:{label:r.a.createElement("p",null,"Very Slow")},25:{label:r.a.createElement("p",null,"Slow")},50:{label:r.a.createElement("p",null,"Normal")},75:{label:r.a.createElement("p",null,"Fast")},100:{label:r.a.createElement("p",null,"Very Fast")}};return r.a.createElement(i.a,null,r.a.createElement(S,{title:"AEX Recorder Settings"}," "),r.a.createElement(_e,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24,minHeight:800}},r.a.createElement("div",{style:{marginRight:"10px",minHeight:750}},r.a.createElement(Le.a,null,r.a.createElement(e,{header:"Demo Mode Playback Speed",key:"1",style:t},r.a.createElement(y.a,{gutter:16},r.a.createElement(b.a,{span:16},r.a.createElement(Te.a,{marks:a,defaultValue:this.state.demoModeSpeed,style:{margin:30},step:25,onChange:this.updateDemoModeSliderValue})),r.a.createElement(b.a,{span:8},r.a.createElement(E.a,{type:"primary",icon:"save",size:"large",style:{width:200,margin:20},onClick:this.saveSetting},"Save")))),r.a.createElement(e,{header:"AEX Credentials",key:"3",style:t},r.a.createElement(Je,null)),r.a.createElement(e,{header:"AEX Recorder User Guide",key:"2",style:t},r.a.createElement("p",null,"Google Team drive: ",r.a.createElement("a",{href:"https://docs.google.com/document/d/1waoxe3YEwuZLng2JFGEJHmiU4JyfdJVq_TlVJm35xDI/edit#"},"AEX Recorder User Guide"))))))))}};var He=class extends r.a.Component{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"getPage",()=>"editor"===this.props.page?r.a.createElement(se,null):"tools"===this.props.page?r.a.createElement(Oe,null):"jsonList"===this.props.page?r.a.createElement(Ae,null):"setting"===this.props.page?r.a.createElement(Ve,null):r.a.createElement(se,null))}render(){return this.getPage()}};var Ge=class extends n.Component{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"changePage",({key:e})=>{this.setState(()=>({page:e}))}),this.state={page:"editor"},this.changePage=this.changePage.bind(this),chrome.runtime.onMessage.addListener(e=>{"Open_Saved_Json_List"===e.message?this.changePage({key:"jsonList"}):"Open_Json_Editor"===e.message&&"editor"!==this.state.page&&this.changePage({key:"editor"})})}render(){return r.a.createElement(i.a,null,r.a.createElement(m,{selectedKey:this.state.page,changePage:this.changePage}),r.a.createElement(i.a,null,r.a.createElement(He,{page:this.state.page}),r.a.createElement(u,null)))}};function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Be extends r.a.Component{constructor(e){super(e),We(this,"windowWidth",400),We(this,"windowHeight",160),We(this,"blockWidth",20),We(this,"blockHeight",20),We(this,"fps",60),We(this,"speed",2.5),We(this,"started",!1),We(this,"player",new qe(20,80)),We(this,"timers",[]),We(this,"items",[]),We(this,"start",function(){this.started=!0,this.timers.push(setInterval(()=>{this.moveItems(),this.player.speedChange(-.5/this.fps),this.player.move(),this.checkGameover(),this.drawItems(),this.player.draw(this)},1/this.fps)),this.timers.push(setInterval(()=>this.generateBricks(),1e3))}),We(this,"pause",function(){this.timers.forEach(e=>clearInterval(e)),this.timers=[],this.started=!0}),We(this,"reset",function(){this.pause(),setTimeout(()=>{this.started=!1,this.player=new qe(20,80),this.timers=[],this.items=[]},0)}),We(this,"addEventListener",function(){this.canvas.current.addEventListener("click",()=>{this.started?this.player.velocity=.5:this.start()})}),We(this,"checkGameover",function(){this.player.y>this.windowHeight&&this.reset(),this.items.forEach(e=>{this.rectCircleColliding(this.player.x,this.player.y,e.x*this.blockWidth,e.y*this.blockHeight)&&(e.color="red",this.reset())})}),We(this,"moveItems",function(){this.items.forEach(e=>e.moveLeft(this.speed/this.fps))}),We(this,"generateBricks",function(){let e=Math.floor(Math.random()*(this.rows/2-1));for(let t=0;t<this.rows/2-e;t++)this.items.push(new Xe(this.cols-1,t));e=Math.floor(Math.random()*(this.rows/2-1));for(let t=0;t<this.rows/2-e;t++)this.items.push(new Xe(this.cols-1,this.rows-t))}),We(this,"drawItems",function(){this.clearBackground(),this.items.forEach(e=>e.draw(this))}),We(this,"clearBackground",function(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.windowWidth,this.windowHeight)}),We(this,"drawLine",function(e,t,a,n){this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(a,n),this.ctx.stroke()}),We(this,"rectCircleColliding",function(e,t,a,n){var r=Math.abs(e-a-this.blockWidth/2),s=Math.abs(t-n-this.blockHeight/2);if(r>this.blockWidth/2+qe.radius)return!1;if(s>this.blockHeight/2+qe.radius)return!1;if(r<=this.blockWidth/2)return!0;if(s<=this.blockHeight/2)return!0;var o=r-this.blockWidth/2,i=s-this.blockHeight/2;return o*o+i*i<=qe.radius*qe.radius}),this.cols=this.windowWidth/this.blockWidth,this.rows=this.windowHeight/this.blockHeight,this.canvas=r.a.createRef()}componentDidMount(){this.ctx=this.canvas.current.getContext("2d"),this.addEventListener()}componentDidUpdate(){this.ctx=this.canvas.current.getContext("2d")}render(){return r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.canvas,style:{width:this.windowWidth,height:this.widnowHeight}}))}}class qe{constructor(e,t){We(this,"speedChange",function(e){this.velocity+=e}),We(this,"move",function(){this.y-=this.velocity}),We(this,"draw",function(e){e.ctx.fillStyle="black",e.ctx.strokeStyle="black",e.ctx.beginPath(),e.ctx.arc(this.x,this.y,qe.radius,0,2*Math.PI,!1),e.ctx.fill(),e.ctx.closePath()}),this.x=e,this.y=t,this.velocity=0}}We(qe,"radius",5);class Xe{constructor(e,t){We(this,"moveLeft",function(e){this.x=this.x-e}),We(this,"draw",function(e){e.ctx.strokeStyle=this.color,e.ctx.strokeRect(this.x*e.blockWidth,this.y*e.blockHeight,e.blockWidth,e.blockHeight);for(let t=0;t<1;t+=.25)e.drawLine(this.x*e.blockWidth,(this.y+t)*e.blockHeight,(this.x+1)*e.blockWidth,(this.y+t)*e.blockHeight),t/.25%2!=0?e.drawLine((this.x+.5)*e.blockWidth,(this.y+t)*e.blockHeight,(this.x+.5)*e.blockWidth,(this.y+t+.25)*e.blockHeight):(e.drawLine((this.x+.33)*e.blockWidth,(this.y+t)*e.blockHeight,(this.x+.33)*e.blockWidth,(this.y+t+.25)*e.blockHeight),e.drawLine((this.x+.66)*e.blockWidth,(this.y+t)*e.blockHeight,(this.x+.66)*e.blockWidth,(this.y+t+.25)*e.blockHeight))}),this.x=e,this.y=t,this.color="black"}}var $e=class extends r.a.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0})}render(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("h1",null,"Error! Something went wrong."),r.a.createElement(Be,null)):this.props.children}};o.a.render(r.a.createElement($e,null,r.a.createElement(Ge,null)),document.getElementById("root"))}});